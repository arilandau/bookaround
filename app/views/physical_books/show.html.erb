<%= content_for(:title) do %>
  Bookaround | <%= @book.title %>
<% end %>

<div class="container">
  <div class="row">
    <div class="col-xs-4">
      <%= image_tag "#{@book.cover_pic_url}", {class: "img-responsive" }   %>
    </div>
    <div class="col-xs-8">
    <h2><%= @book.title %></h2>
    <p><%= @book.author %></p>
    <p><%= @book.description %></p>

    <% if current_user == PhysicalBook.find(params[:id]).user %>
      <%= link_to "Update Book", physical_book_path(@book), {class: "btn btn-primary"} %>

      <%= link_to "Delete Book", physical_book_path(@book), class: "btn btn-primary", method: :delete, data: {confirm: "Are you sure you want to delete this book?"} %>
    <% end %>

      <%= link_to "User", user_path(@book.user), class: "btn btn-primary" %>
      <%= mail_to "Contact User", @book.user.email, class: "btn btn-primary" %>
    </div>
  </div>

  <div id="map" style="width: 100%; height: 600px;"></div>
  <% content_for(:after_js) do %>

  <script type="text/javascript">
    $(document).on('ready', function() {
      var handler = Gmaps.build('Google');

      var mapOptions = {
        center: new google.maps.LatLng(<%=@book.user.latitude %>,<%=@book.user.longitude %>),
        zoom: 10
      };
      handler.buildMap({ provider: mapOptions, internal: { id: 'map' } }, function(){
        markers = handler.addMarkers(<%= raw @hash.to_json %>);

        });
    });
  </script>
  <% end %>
</div>
